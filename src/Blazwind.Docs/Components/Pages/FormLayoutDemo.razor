@page "/components/form-layout"
@using Blazwind.Components.Form
@using Blazwind.Components.Input
@using Blazwind.Components.Layout
@using Blazwind.Components.Typography
@using Blazwind.Components.Card
@using Blazwind.Components.Icon
@using Blazwind.Components.Alert
@using Blazwind.Components.Shared

<PageTitle>Form Layout Demo - Blazwind</PageTitle>

<BwColumn Spacing="BwSpacing.Lg">
    <BwHero Title="Form Layouts" Description="Compact, comfortable form layouts with different label positions."
        Icon="fa-solid fa-table-cells" Color="BwColor.Primary" />

    @* Density Comparison *@
    <BwCard Title="Density Comparison" Subtitle="Compact, Normal and Relaxed modes" Icon="fa-solid fa-arrows-up-down"
        Color="BwColor.Info">
        <BwRow Spacing="BwSpacing.Md" Cols="1" MdCols="3">
            @* Compact *@
            <BwCard Color="BwColor.Secondary">
                <BwPadding All="BwSpacing.Md">
                    <BwMargin Bottom="BwSpacing.Sm">
                        <BwRow CrossAxisAlignment="BwCrossAxisAlignment.Center" Spacing="BwSpacing.Sm">
                            <BwIcon Name="fa-solid fa-compress" Color="BwColor.Primary" />
                            <BwTypography Tag="BwTypographyTag.H4" Weight="BwFontWeight.Semibold">Compact</BwTypography>
                        </BwRow>
                    </BwMargin>
                    <BwForm Model="@_compactModel" Density="BwFormDensity.Compact">
                        <BwFormField Label="Name">
                            <BwInput @bind-Value="_compactModel.Name" Placeholder="Your name" />
                        </BwFormField>
                        <BwFormField Label="Email">
                            <BwInput @bind-Value="_compactModel.Email" Type="email" Placeholder="example@mail.com" />
                        </BwFormField>
                        <BwFormField Label="Active">
                            <BwSwitch @bind-Value="_compactModel.IsActive" Label="Is user active?" />
                        </BwFormField>
                    </BwForm>
                </BwPadding>
            </BwCard>

            @* Normal *@
            <BwCard Color="BwColor.Secondary">
                <BwPadding All="BwSpacing.Md">
                    <BwMargin Bottom="BwSpacing.Sm">
                        <BwRow CrossAxisAlignment="BwCrossAxisAlignment.Center" Spacing="BwSpacing.Sm">
                            <BwIcon Name="fa-solid fa-grip-lines" Color="BwColor.Success" />
                            <BwTypography Tag="BwTypographyTag.H4" Weight="BwFontWeight.Semibold">Normal</BwTypography>
                        </BwRow>
                    </BwMargin>
                    <BwForm Model="@_normalModel" Density="BwFormDensity.Normal">
                        <BwFormField Label="Name">
                            <BwInput @bind-Value="_normalModel.Name" Placeholder="Your name" />
                        </BwFormField>
                        <BwFormField Label="Email">
                            <BwInput @bind-Value="_normalModel.Email" Type="email" Placeholder="example@mail.com" />
                        </BwFormField>
                        <BwFormField Label="Active">
                            <BwSwitch @bind-Value="_normalModel.IsActive" Label="Is user active?" />
                        </BwFormField>
                    </BwForm>
                </BwPadding>
            </BwCard>

            @* Relaxed *@
            <BwCard Color="BwColor.Secondary">
                <BwPadding All="BwSpacing.Md">
                    <BwMargin Bottom="BwSpacing.Sm">
                        <BwRow CrossAxisAlignment="BwCrossAxisAlignment.Center" Spacing="BwSpacing.Sm">
                            <BwIcon Name="fa-solid fa-expand" Color="BwColor.Warning" />
                            <BwTypography Tag="BwTypographyTag.H4" Weight="BwFontWeight.Semibold">Relaxed</BwTypography>
                        </BwRow>
                    </BwMargin>
                    <BwForm Model="@_relaxedModel" Density="BwFormDensity.Relaxed">
                        <BwFormField Label="Name">
                            <BwInput @bind-Value="_relaxedModel.Name" Placeholder="Your name" />
                        </BwFormField>
                        <BwFormField Label="Email">
                            <BwInput @bind-Value="_relaxedModel.Email" Type="email" Placeholder="example@mail.com" />
                        </BwFormField>
                        <BwFormField Label="Active">
                            <BwSwitch @bind-Value="_relaxedModel.IsActive" Label="Is user active?" />
                        </BwFormField>
                    </BwForm>
                </BwPadding>
            </BwCard>
        </BwRow>
    </BwCard>

    @* Multi-Column Grid with Diverse Components *@
    <BwCard Title="Multi-Column Form (Compact)" Subtitle="Grid layout for forms with 50+ elements - all component types"
        Icon="fa-solid fa-table-cells-large" Color="BwColor.Warning">
        <BwForm Model="@_gridModel" Density="BwFormDensity.Compact" OnValidSubmit="HandleGridSubmit">
            <BwFormGrid Columns="4">
                <BwFormField Label="ID Number" IsRequired="true">
                    <BwInput @bind-Value="_gridModel.TcNo" Placeholder="11111111111" />
                </BwFormField>
                <BwFormField Label="First Name" IsRequired="true">
                    <BwInput @bind-Value="_gridModel.FirstName" Placeholder="First name" />
                </BwFormField>
                <BwFormField Label="Last Name" IsRequired="true">
                    <BwInput @bind-Value="_gridModel.LastName" Placeholder="Last name" />
                </BwFormField>
                <BwFormField Label="Birth Date">
                    <BwDatePicker @bind-Value="_gridModel.BirthDate" Placeholder="Select date" />
                </BwFormField>
                <BwFormField Label="Phone">
                    <BwMaskedInput @bind-Value="_gridModel.Phone" Preset="BwMaskPreset.Phone"
                        Placeholder="(___) ___ __ __" />
                </BwFormField>
                <BwFormField Label="Email">
                    <BwInput @bind-Value="_gridModel.Email" Type="email" Placeholder="example@mail.com"
                        IconLeft="fa-solid fa-envelope" />
                </BwFormField>
                <BwFormField Label="City">
                    <BwSelect @bind-Value="_gridModel.City" Placeholder="Select city">
                        <option value="58">Sivas</option>
                        <option value="06">Ankara</option>
                        <option value="34">Istanbul</option>
                        <option value="35">Izmir</option>
                    </BwSelect>
                </BwFormField>
                <BwFormField Label="Gender">
                    <BwRadioGroup @bind-Value="_gridModel.Gender">
                        <BwRadio Value="@("M")" Label="Male" />
                        <BwRadio Value="@("F")" Label="Female" />
                    </BwRadioGroup>
                </BwFormField>
                <BwFormField Label="Neighborhood">
                    <BwSelect @bind-Value="_gridModel.Neighborhood" Placeholder="Select neighborhood">
                        <option value="Akdegirmen">Akdeğirmen</option>
                        <option value="Alibaba">Alibaba</option>
                        <option value="Carsi">Çarşıbaşı</option>
                        <option value="Fevzipasa">Fevzipaşa</option>
                    </BwSelect>
                </BwFormField>
                <BwFormField Label="Street">
                    <BwInput @bind-Value="_gridModel.Street" Placeholder="Street" />
                </BwFormField>
                <BwFormField Label="Building No">
                    <BwInput @bind-Value="_gridModel.BuildingNo" Placeholder="No" />
                </BwFormField>
                <BwFormField Label="Apartment No">
                    <BwInput @bind-Value="_gridModel.ApartmentNo" Placeholder="Apartment" />
                </BwFormField>
            </BwFormGrid>

            <BwFormRow>
                <BwFormField Label="" Class="flex-1">
                    <BwCheckbox @bind-Value="_gridModel.AcceptTerms" Label="I accept the terms of use" />
                </BwFormField>
                <BwFormField Label="" Class="flex-1">
                    <BwCheckbox @bind-Value="_gridModel.ReceiveNews" Label="I want to be informed about news" />
                </BwFormField>
            </BwFormRow>

            <BwFormActions>
                <BwButton Text="Clear" Variant="BwVariant.Outline" Color="BwColor.Secondary" OnClick="ClearGridForm" />
                <BwButton Text="Save" Color="BwColor.Primary" Icon="fa-solid fa-save" HtmlType="submit" />
            </BwFormActions>
        </BwForm>

        @if (_gridSubmitted)
        {
            <BwMargin Top="BwSpacing.Md">
                <BwAlert Type="BwAlertType.Success" ShowIcon="true">
                    Form submitted successfully!
                </BwAlert>
            </BwMargin>
        }
    </BwCard>

    @* Left-Label Kurumsal Form *@
    <BwCard Title="Corporate Form (Left-Label)" Subtitle="Official document-like horizontal layout"
        Icon="fa-solid fa-building-columns" Color="BwColor.Danger">
        <BwForm Model="@_corporateModel" LabelPosition="BwLabelPosition.Left" Density="BwFormDensity.Normal"
            OnValidSubmit="HandleCorporateSubmit">
            <div style="max-width: 42rem;">
                <BwFormField Label="Organization Name" IsRequired="true" LabelWidth="150px">
                    <BwInput @bind-Value="_corporateModel.OrganizationName" Placeholder="Organization/Company name" />
                </BwFormField>
                <BwFormField Label="Tax Number" IsRequired="true" LabelWidth="150px">
                    <BwInput @bind-Value="_corporateModel.TaxNumber" Placeholder="1234567890" />
                </BwFormField>
                <BwFormField Label="Authorized Person" LabelWidth="150px">
                    <BwInput @bind-Value="_corporateModel.AuthorizedPerson" Placeholder="Full name" />
                </BwFormField>
                <BwFormField Label="Phone" LabelWidth="150px">
                    <BwMaskedInput @bind-Value="_corporateModel.Phone" Preset="BwMaskPreset.Phone"
                        Placeholder="(___) ___ __ __" />
                </BwFormField>
                <BwFormField Label="Email" LabelWidth="150px">
                    <BwInput @bind-Value="_corporateModel.Email" Type="email" Placeholder="info@organization.gov.tr" />
                </BwFormField>
                <BwFormField Label="Organization Type" LabelWidth="150px">
                    <BwSelect @bind-Value="_corporateModel.OrganizationType" Placeholder="Select type">
                        <option value="kamu">Public Institution</option>
                        <option value="ozel">Private Sector</option>
                        <option value="stk">Non-Governmental Organization</option>
                    </BwSelect>
                </BwFormField>
                <BwFormField Label="Rating" LabelWidth="150px">
                    <BwRating @bind-Value="_corporateModel.Rating" ShowValue="true" />
                </BwFormField>
                <BwFormField Label="Address" LabelWidth="150px">
                    <BwTextarea @bind-Value="_corporateModel.Address" Placeholder="Full address..." />
                </BwFormField>
            </div>
            <BwFormActions Align="BwAlignment.Left">
                <BwButton Text="Clear Form" Variant="BwVariant.Ghost" Color="BwColor.Secondary"
                    OnClick="ClearCorporateForm" />
                <BwButton Text="Save and Send" Color="BwColor.Primary" Icon="fa-solid fa-paper-plane"
                    HtmlType="submit" />
            </BwFormActions>
        </BwForm>

        @if (_corporateSubmitted)
        {
            <BwMargin Top="BwSpacing.Md">
                <BwAlert Type="BwAlertType.Success" ShowIcon="true">
                    Corporate form submitted successfully!
                </BwAlert>
            </BwMargin>
        }
    </BwCard>

    @* HelpTextMode Demonstration *@
    <BwCard Title="Help Text Display" Subtitle="Inline and Popup help text modes" Icon="fa-solid fa-circle-question"
        Color="BwColor.Success">
        <BwRow Spacing="BwSpacing.Md" Cols="1" MdCols="2">
            @* Inline Mode (Default) *@
            <BwCard Color="BwColor.Secondary">
                <BwPadding All="BwSpacing.Md">
                    <BwMargin Bottom="BwSpacing.Sm">
                        <BwRow CrossAxisAlignment="BwCrossAxisAlignment.Center" Spacing="BwSpacing.Sm">
                            <BwIcon Name="fa-solid fa-align-left" Color="BwColor.Success" />
                            <BwTypography Tag="BwTypographyTag.H4" Weight="BwFontWeight.Semibold">Inline Mode (Default)
                            </BwTypography>
                        </BwRow>
                    </BwMargin>
                    <BwForm Model="@_helpDemoModel" Density="BwFormDensity.Normal" HelpTextMode="BwHelpTextMode.Inline">
                        <BwFormField Label="Full Name" HelperText="Enter your full name" IsRequired="true">
                            <BwInput @bind-Value="_helpDemoModel.Name" Placeholder="Full Name" />
                        </BwFormField>
                        <BwFormField Label="Email" HelperText="Prefer your work email">
                            <BwInput @bind-Value="_helpDemoModel.Email" Type="email" Placeholder="example@mail.com" />
                        </BwFormField>
                    </BwForm>
                </BwPadding>
            </BwCard>

            @* Popup Mode *@
            <BwCard Color="BwColor.Secondary">
                <BwPadding All="BwSpacing.Md">
                    <BwMargin Bottom="BwSpacing.Sm">
                        <BwRow CrossAxisAlignment="BwCrossAxisAlignment.Center" Spacing="BwSpacing.Sm">
                            <BwIcon Name="fa-solid fa-comment-dots" Color="BwColor.Info" />
                            <BwTypography Tag="BwTypographyTag.H4" Weight="BwFontWeight.Semibold">Popup Mode (Tooltip)
                            </BwTypography>
                        </BwRow>
                    </BwMargin>
                    <BwForm Model="@_helpDemoModel" Density="BwFormDensity.Normal" HelpTextMode="BwHelpTextMode.Popup">
                        <BwFormField Label="Full Name"
                            HelperText="Enter your full name. Write it as it appears on your ID." IsRequired="true">
                            <BwInput @bind-Value="_helpDemoModel.Name" Placeholder="Full Name" />
                        </BwFormField>
                        <BwFormField Label="Email" HelperText="Prefer your work email. Personal email is not accepted.">
                            <BwInput @bind-Value="_helpDemoModel.Email" Type="email" Placeholder="example@mail.com" />
                        </BwFormField>
                    </BwForm>
                </BwPadding>
            </BwCard>
        </BwRow>
    </BwCard>
</BwColumn>

@code {

    // Models for different demos
    private readonly SimpleModel _compactModel = new();
    private readonly SimpleModel _normalModel = new();
    private readonly SimpleModel _relaxedModel = new();
    private GridFormModel _gridModel = new();
    private CorporateFormModel _corporateModel = new();
    private readonly SimpleModel _helpDemoModel = new();

    private bool _gridSubmitted;
    private bool _corporateSubmitted;

    public class SimpleModel
    {
        public string? Name { get; set; }
        public string? Email { get; set; }
        public bool IsActive { get; set; }
    }

    public class GridFormModel
    {
        public string? TcNo { get; set; }
        public string? FirstName { get; set; }
        public string? LastName { get; set; }
        public DateTime? BirthDate { get; set; }
        public string? Phone { get; set; }
        public string? Email { get; set; }
        public string? City { get; set; }
        public string? Gender { get; set; }
        public string? Neighborhood { get; set; }
        public string? Street { get; set; }
        public string? BuildingNo { get; set; }
        public string? ApartmentNo { get; set; }
        public bool AcceptTerms { get; set; }
        public bool ReceiveNews { get; set; }
    }

    public class CorporateFormModel
    {
        public string? OrganizationName { get; set; }
        public string? TaxNumber { get; set; }
        public string? AuthorizedPerson { get; set; }
        public string? Phone { get; set; }
        public string? Email { get; set; }
        public string? OrganizationType { get; set; }
        public double Rating { get; set; } = 3;
        public string? Address { get; set; }
    }

    private void HandleGridSubmit(EditContext context)
    {
        _gridSubmitted = true;
    }

    private void HandleCorporateSubmit(EditContext context)
    {
        _corporateSubmitted = true;
    }

    private void ClearGridForm()
    {
        _gridModel = new GridFormModel();
        _gridSubmitted = false;
    }

    private void ClearCorporateForm()
    {
        _corporateModel = new CorporateFormModel();
        _corporateSubmitted = false;
    }

}