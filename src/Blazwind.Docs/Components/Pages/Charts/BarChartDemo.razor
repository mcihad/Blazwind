@page "/charts/bar"
@using Blazwind.Components.Chart
@using Blazwind.Components.Card
@using Blazwind.Components.Layout
@using Blazwind.Components.Shared

<PageTitle>Çubuk Grafik - Blazwind Charts</PageTitle>

<BwColumn Spacing="BwSpacing.Lg">
    <BwHero Title="Çubuk Grafik (Bar Chart)" 
            Description="Kategorik verilerin karşılaştırılması için ideal grafik tipi."
            Icon="fa-solid fa-chart-bar"
            Color="BwColor.Success" />

    @* Temel Çubuk *@
    <BwCard Title="Temel Çubuk Grafik" Subtitle="Basit dikey çubuk grafik." Icon="fa-solid fa-chart-bar" Color="BwColor.Primary">
        <BwChart Options="_basicBar" Height="350px" />
    </BwCard>

    <BwRow Spacing="BwSpacing.Md" Wrap="true" Cols="1" MdCols="2" LgCols="2">
        @* Yatay Çubuk *@
        <BwCard Title="Yatay Çubuk" Subtitle="Horizontal bar chart." Icon="fa-solid fa-align-left" Color="BwColor.Info">
            <BwChart Options="_horizontalBar" Height="280px" />
        </BwCard>

        @* Grouped Bar *@
        <BwCard Title="Gruplandırılmış" Subtitle="Grouped bar chart." Icon="fa-solid fa-layer-group" Color="BwColor.Success">
            <BwChart Options="_groupedBar" Height="280px" />
        </BwCard>
    </BwRow>

    @* Stacked Bar *@
    <BwCard Title="Yığılmış Çubuk" Subtitle="Stacked bar ile toplam gösterimi." Icon="fa-solid fa-bars-staggered" Color="BwColor.Warning">
        <BwChart Options="_stackedBar" Height="350px" />
    </BwCard>

    @* Waterfall *@
    <BwCard Title="Şelale Grafik" Subtitle="Waterfall chart - değişimleri gösterir." Icon="fa-solid fa-water" Color="BwColor.Danger">
        <BwChart Options="_waterfallBar" Height="350px" />
    </BwCard>

    @* Negative Values *@
    <BwCard Title="Negatif Değerler" Subtitle="Pozitif ve negatif değerler birlikte." Icon="fa-solid fa-arrows-up-down" Color="BwColor.Secondary">
        <BwChart Options="_negativeBar" Height="350px" />
    </BwCard>
</BwColumn>

@code {
    private ChartOptions _basicBar = new()
    {
        Title = new ChartTitle { Text = "Departman Bazlı İşlem Sayısı", Left = ChartPosition.Center },
        Tooltip = new ChartTooltip { Trigger = ChartTooltipTrigger.Axis },
        XAxis = new ChartAxis
        {
            Type = ChartAxisType.Category,
            Data = new List<string> { "Yazı İşleri", "İmar", "Fen İşleri", "Mali Hizmetler", "Bilgi İşlem", "Park Bahçe" }
        },
        YAxis = new ChartAxis { Type = ChartAxisType.Value },
        Series = new List<ChartSeries>
        {
            new()
            {
                Type = ChartSeriesType.Bar,
                Data = new List<int> { 320, 275, 450, 180, 95, 220 },
                ItemStyle = new ChartItemStyle { BorderRadius = 4 }
            }
        },
        Color = new List<string> { "#6366f1" }
    };

    private ChartOptions _horizontalBar = new()
    {
        Tooltip = new ChartTooltip { Trigger = ChartTooltipTrigger.Axis },
        XAxis = new ChartAxis { Type = ChartAxisType.Value },
        YAxis = new ChartAxis
        {
            Type = ChartAxisType.Category,
            Data = new List<string> { "Çin", "Hindistan", "ABD", "Endonezya", "Brezilya" }
        },
        Series = new List<ChartSeries>
        {
            new() { Type = ChartSeriesType.Bar, Data = new List<int> { 1439, 1380, 331, 273, 212 } }
        },
        Color = new List<string> { "#10b981" }
    };

    private ChartOptions _groupedBar = new()
    {
        Tooltip = new ChartTooltip { Trigger = ChartTooltipTrigger.Axis },
        Legend = new ChartLegend { Data = new List<string> { "2024", "2025" } },
        XAxis = new ChartAxis
        {
            Type = ChartAxisType.Category,
            Data = new List<string> { "Q1", "Q2", "Q3", "Q4" }
        },
        YAxis = new ChartAxis { Type = ChartAxisType.Value },
        Series = new List<ChartSeries>
        {
            new() { Name = "2024", Type = ChartSeriesType.Bar, Data = new List<int> { 320, 275, 450, 380 } },
            new() { Name = "2025", Type = ChartSeriesType.Bar, Data = new List<int> { 420, 375, 550, 480 } }
        },
        Color = new List<string> { "#3b82f6", "#f59e0b" }
    };

    private ChartOptions _stackedBar = new()
    {
        Title = new ChartTitle { Text = "Aylık Gelir Kaynakları", Left = ChartPosition.Center },
        Tooltip = new ChartTooltip { Trigger = ChartTooltipTrigger.Axis },
        Legend = new ChartLegend { Data = new List<string> { "Vergi", "Harç", "Ceza", "Diğer" } },
        XAxis = new ChartAxis
        {
            Type = ChartAxisType.Category,
            Data = new List<string> { "Oca", "Şub", "Mar", "Nis", "May", "Haz" }
        },
        YAxis = new ChartAxis { Type = ChartAxisType.Value },
        Series = new List<ChartSeries>
        {
            new() { Name = "Vergi", Type = ChartSeriesType.Bar, Stack = "total", Data = new List<int> { 320, 302, 301, 334, 390, 330 } },
            new() { Name = "Harç", Type = ChartSeriesType.Bar, Stack = "total", Data = new List<int> { 120, 132, 101, 134, 90, 230 } },
            new() { Name = "Ceza", Type = ChartSeriesType.Bar, Stack = "total", Data = new List<int> { 220, 182, 191, 234, 290, 330 } },
            new() { Name = "Diğer", Type = ChartSeriesType.Bar, Stack = "total", Data = new List<int> { 150, 212, 201, 154, 190, 330 } }
        },
        Color = new List<string> { "#3b82f6", "#10b981", "#f59e0b", "#8b5cf6" }
    };

    private ChartOptions _waterfallBar = new()
    {
        Title = new ChartTitle { Text = "Bütçe Değişim Analizi", Left = ChartPosition.Center },
        Tooltip = new ChartTooltip { Trigger = ChartTooltipTrigger.Axis },
        XAxis = new ChartAxis
        {
            Type = ChartAxisType.Category,
            Data = new List<string> { "Başlangıç", "Gelir", "Personel", "Yatırım", "Diğer", "Bitiş" }
        },
        YAxis = new ChartAxis { Type = ChartAxisType.Value },
        Series = new List<ChartSeries>
        {
            new() { Name = "Placeholder", Type = ChartSeriesType.Bar, Stack = "Total", ItemStyle = new ChartItemStyle { BorderColor = "transparent", Color = "transparent" }, Data = new List<int> { 0, 1000, 800, 600, 500, 0 } },
            new() { Name = "Değer", Type = ChartSeriesType.Bar, Stack = "Total", Data = new List<int> { 1000, 200, -200, -200, -100, 700 } }
        },
        Color = new List<string> { "transparent", "#3b82f6" }
    };

    private ChartOptions _negativeBar = new()
    {
        Title = new ChartTitle { Text = "Gelir/Gider Karşılaştırması", Left = ChartPosition.Center },
        Tooltip = new ChartTooltip { Trigger = ChartTooltipTrigger.Axis },
        Legend = new ChartLegend { Data = new List<string> { "Gelir", "Gider" } },
        XAxis = new ChartAxis
        {
            Type = ChartAxisType.Category,
            Data = new List<string> { "Oca", "Şub", "Mar", "Nis", "May", "Haz" }
        },
        YAxis = new ChartAxis { Type = ChartAxisType.Value },
        Series = new List<ChartSeries>
        {
            new() { Name = "Gelir", Type = ChartSeriesType.Bar, Data = new List<int> { 200, 170, 240, 244, 200, 220 } },
            new() { Name = "Gider", Type = ChartSeriesType.Bar, Data = new List<int> { -120, -132, -101, -134, -190, -130 } }
        },
        Color = new List<string> { "#10b981", "#ef4444" }
    };
}
