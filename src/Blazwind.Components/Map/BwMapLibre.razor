@namespace Blazwind.Components.Map
@using Blazwind.Components.Map.Models
@inherits BwBase

<CascadingValue Value="this" IsFixed="true">
    <div @ref="_mapContainer" id="@Id" class="@ComputedClass" style="@ComputedStyle" @attributes="AdditionalAttributes">
        @if (_isLoaded)
        {
            @ChildContent
        }
    </div>
</CascadingValue>

@code {
    private string ComputedClass => CombineClasses("bw-maplibre");
    private string ComputedStyle => string.IsNullOrEmpty(Style) ? "width: 100%; height: 100%; min-height: 300px;" : Style;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        if (string.IsNullOrEmpty(Id))
        {
            Id = $"bw-map-{Guid.NewGuid():N}";
        }
    }
}

