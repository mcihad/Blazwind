@namespace Blazwind.Components.Map
@inherits BwBase

<div class="@ComputedClass" style="@ComputedStyle" id="@Id" @attributes="AdditionalAttributes">
    @ChildContent
</div>

@code {
    // Removed Class and Style parameters (inherited)

    /// <summary>
    /// Whether to fill the entire viewport
    /// </summary>
    [Parameter] public bool Fullscreen { get; set; } = true;

    /// <summary>
    /// Fixed height when not fullscreen (CSS value)
    /// </summary>
    [Parameter] public string? Height { get; set; }

    /// <summary>
    /// Fixed width when not fullscreen (CSS value)
    /// </summary>
    [Parameter] public string? Width { get; set; }

    /// <summary>
    /// Content (should contain BwMapLibre component)
    /// </summary>
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private string ComputedClass => CombineClasses("bw-map-layout", Fullscreen ? "bw-map-layout--fullscreen" : null);

    private string ComputedStyle
    {
        get
        {
            if (Fullscreen)
            {
                return $"position: fixed; inset: 0; width: 100vw; height: 100vh; z-index: 50; {Style}".Trim();
            }

            var styles = new List<string>();

            if (!string.IsNullOrEmpty(Width))
                styles.Add($"width: {Width}");
            else
                styles.Add("width: 100%");

            if (!string.IsNullOrEmpty(Height))
                styles.Add($"height: {Height}");
            else
                styles.Add("height: 500px");

            styles.Add("position: relative");

            if (!string.IsNullOrEmpty(Style))
                styles.Add(Style);

            return string.Join("; ", styles);
        }
    }
}