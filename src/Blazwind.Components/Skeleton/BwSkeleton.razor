@namespace Blazwind.Components.Skeleton
@using Blazwind.Components.Shared
@inherits BwBase

@{
    var baseClass = "bw-skeleton";
    
    var shapeClass = Shape switch
    {
        BwSkeletonShape.Circle => "rounded-full",
        BwSkeletonShape.Rectangle => "rounded",
        BwSkeletonShape.Text => "rounded h-4",
        _ => "rounded"
    };
    
    var widthStyle = !string.IsNullOrEmpty(Width) ? $"width: {Width};" : "width: 100%;";
    var heightStyle = !string.IsNullOrEmpty(Height) ? $"height: {Height};" : (Shape == BwSkeletonShape.Text ? "" : "height: 100px;");
}

@if (Lines > 1)
{
    <div class="@CombineClasses("bw-skeleton-group")" style="@Style" id="@Id" @attributes="AdditionalAttributes">
        @for (int i = 0; i < Lines; i++)
        {
            var lineWidth = i == Lines - 1 ? "60%" : "100%";
            <div class="@baseClass rounded h-4" style="width: @lineWidth;"></div>
        }
    </div>
}
else
{
    <div class="@CombineClasses(baseClass, shapeClass)" style="@widthStyle @heightStyle @Style" id="@Id" @attributes="AdditionalAttributes"></div>
}

@code {
    [Parameter] public BwSkeletonShape Shape { get; set; } = BwSkeletonShape.Rectangle;
    [Parameter] public string? Width { get; set; }
    [Parameter] public string? Height { get; set; }
    [Parameter] public int Lines { get; set; } = 1;
    // Removed Class parameter (inherited)
}
