@namespace Blazwind.Components.Skeleton
@using Blazwind.Components.Shared

@{
    var baseClass = "bg-gray-200 dark:bg-gray-700 animate-pulse";
    
    var shapeClass = Shape switch
    {
        BwSkeletonShape.Circle => "rounded-full",
        BwSkeletonShape.Rectangle => "rounded",
        BwSkeletonShape.Text => "rounded h-4",
        _ => "rounded"
    };
    
    var widthStyle = !string.IsNullOrEmpty(Width) ? $"width: {Width};" : "width: 100%;";
    var heightStyle = !string.IsNullOrEmpty(Height) ? $"height: {Height};" : (Shape == BwSkeletonShape.Text ? "" : "height: 100px;");
}

@if (Lines > 1)
{
    <div class="space-y-2 @Class">
        @for (int i = 0; i < Lines; i++)
        {
            var lineWidth = i == Lines - 1 ? "60%" : "100%";
            <div class="@baseClass rounded h-4" style="width: @lineWidth;"></div>
        }
    </div>
}
else
{
    <div class="@baseClass @shapeClass @Class" style="@widthStyle @heightStyle"></div>
}

@code {
    [Parameter] public BwSkeletonShape Shape { get; set; } = BwSkeletonShape.Rectangle;
    [Parameter] public string? Width { get; set; }
    [Parameter] public string? Height { get; set; }
    [Parameter] public int Lines { get; set; } = 1;
    [Parameter] public string? Class { get; set; }
}
