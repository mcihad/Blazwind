@namespace Blazwind.Components.Layout
@using Blazwind.Components.Shared
@inherits BwBase

@{
    var hasSidebar = Sidebar != null;
    var marginClass = "";
    
    if (hasSidebar)
    {
        marginClass = SidebarPosition == BwDirection.Right ? "mr-64" : "ml-64";
    }
}

@* Sidebar (Fixed) *@
@if (hasSidebar)
{
    <BwSidebar Position="@SidebarPosition">
        @Sidebar
    </BwSidebar>
}

<div class="@CombineClasses(Class)" style="@Style" id="@Id" @attributes="AdditionalAttributes">
    @* Main Content - offset for fixed sidebar *@
    <div class="min-h-screen flex flex-col hidden lg:flex @marginClass">
        @* Header *@
        @if (Header != null || hasSidebar)
        {
            <header class="h-14 border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 flex items-center gap-4 px-2 sticky top-0 z-40">
                @if (hasSidebar)
                {
                    <BwSidebarToggle />
                }
                @Header
            </header>
        }

        @* Content *@
        <main class="flex-1 p-3 bg-gray-50 dark:bg-black">
            @ChildContent
        </main>

        @* Footer *@
        @if (Footer != null)
        {
            <footer class="border-t border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 p-2">
                @Footer
            </footer>
        }
    </div>

    @* Mobile Layout *@
    <div class="min-h-screen flex flex-col lg:hidden">
        @* Header *@
        @if (Header != null || hasSidebar)
        {
            <header class="h-14 border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 flex items-center gap-4 px-3 sticky top-0 z-40">
                @if (hasSidebar)
                {
                    <BwSidebarToggle />
                }
                @Header
            </header>
        }

        @* Content *@
        <main class="flex-1 p-3 bg-gray-50 dark:bg-black">
            @ChildContent
        </main>

        @* Footer *@
        @if (Footer != null)
        {
            <footer class="border-t border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 p-3">
                @Footer
            </footer>
        }
    </div>
</div>

@code {
    [Parameter] public RenderFragment? Sidebar { get; set; }
    [Parameter] public RenderFragment? Header { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public RenderFragment? Footer { get; set; }

    [Parameter] public BwDirection SidebarPosition { get; set; } = BwDirection.Left;
}