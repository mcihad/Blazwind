@namespace Blazwind.Components.Layout
@using Blazwind.Components.Shared
@inherits BwBase

@{
    var hasSidebar = Sidebar != null;
    var marginClass = "";
    
    if (hasSidebar)
    {
        marginClass = SidebarPosition == BwDirection.Right ? "mr-72" : "ml-72";
    }
}

@* Sidebar (Fixed) *@
@if (hasSidebar)
{
    <BwSidebar Position="@SidebarPosition">
        @Sidebar
    </BwSidebar>
}

<div class="@CombineClasses(Class)" style="@Style" id="@Id" @attributes="AdditionalAttributes">
    @* Main Content - offset for fixed sidebar *@
    <div class="min-h-screen flex flex-col hidden lg:flex @marginClass">
        @* Header *@
        @if (Header != null || hasSidebar)
        {
            <header class="bw-app-header px-2">
                @if (hasSidebar)
                {
                    <BwSidebarToggle />
                }
                @Header
            </header>
        }

        @* Content *@
        <main class="bw-app-main">
            @ChildContent
        </main>

        @* Footer *@
        @if (Footer != null)
        {
            <footer class="bw-app-footer">
                @Footer
            </footer>
        }
    </div>

    @* Mobile Layout *@
    <div class="min-h-screen flex flex-col lg:hidden">
        @* Header *@
        @if (Header != null || hasSidebar)
        {
            <header class="bw-app-header px-3">
                @if (hasSidebar)
                {
                    <BwSidebarToggle />
                }
                @Header
            </header>
        }

        @* Content *@
        <main class="bw-app-main">
            @ChildContent
        </main>

        @* Footer *@
        @if (Footer != null)
        {
            <footer class="bw-app-footer p-3">
                @Footer
            </footer>
        }
    </div>
</div>

@code {
    [Parameter] public RenderFragment? Sidebar { get; set; }
    [Parameter] public RenderFragment? Header { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public RenderFragment? Footer { get; set; }

    [Parameter] public BwDirection SidebarPosition { get; set; } = BwDirection.Left;
}