@namespace Blazwind.Components.Layout
@inherits BwBase
@{
    var style = BuildStyle();
}

<div class="@CombineClasses()" style="@style" id="@Id" @attributes="AdditionalAttributes">
    @ChildContent
</div>

@code {

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    ///     Row position (0-indexed)
    /// </summary>
    [Parameter]
    public int Row { get; set; }

    /// <summary>
    ///     Column position (0-indexed)
    /// </summary>
    [Parameter]
    public int Column { get; set; }

    /// <summary>
    ///     Number of rows to span
    /// </summary>
    [Parameter]
    public int RowSpan { get; set; } = 1;

    /// <summary>
    ///     Number of columns to span
    /// </summary>
    [Parameter]
    public int ColumnSpan { get; set; } = 1;


    private string BuildStyle()
    {
        var parts = new List<string>();

        // Grid row: CSS uses 1-indexed lines
        var rowStart = Row + 1;
        var rowEnd = rowStart + RowSpan;
        parts.Add($"grid-row: {rowStart} / {rowEnd}");

        // Grid column: CSS uses 1-indexed lines
        var colStart = Column + 1;
        var colEnd = colStart + ColumnSpan;
        parts.Add($"grid-column: {colStart} / {colEnd}");

        // Append custom style
        if (!string.IsNullOrWhiteSpace(Style))
        {
            parts.Add(Style.TrimEnd(';'));
        }

        return string.Join("; ", parts) + ";";
    }

}
