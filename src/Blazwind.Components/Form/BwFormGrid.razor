@namespace Blazwind.Components.Form
@using Blazwind.Components.Shared
@inherits BwBase

@{
    var gapClass = Density switch
    {
        BwFormDensity.Compact => "gap-2",
        BwFormDensity.Relaxed => "gap-6",
        _ => "gap-4"
    };
    
    var columnsClass = Columns switch
    {
        1 => "grid-cols-1",
        2 => "grid-cols-1 md:grid-cols-2",
        3 => "grid-cols-1 md:grid-cols-2 lg:grid-cols-3",
        4 => "grid-cols-1 md:grid-cols-2 lg:grid-cols-4",
        5 => "grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",
        6 => "grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",
        _ => "grid-cols-1 md:grid-cols-2 lg:grid-cols-3"
    };
}

<div class="@CombineClasses($"grid {columnsClass} {gapClass}")" style="@Style" id="@Id" @attributes="AdditionalAttributes">
    @ChildContent
</div>

@code {
    [CascadingParameter] private BwFormDensity? CascadedDensity { get; set; }
    
    /// <summary>Number of columns (1-6)</summary>
    [Parameter] public int Columns { get; set; } = 3;
    
    /// <summary>Density override</summary>
    [Parameter] public BwFormDensity? DensityOverride { get; set; }
    

    
    /// <summary>Child content (form fields)</summary>
    [Parameter] public RenderFragment? ChildContent { get; set; }
    
    private BwFormDensity Density => DensityOverride ?? CascadedDensity ?? BwFormDensity.Normal;
}
