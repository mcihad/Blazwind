@namespace Blazwind.Components.Dropdown
@inherits BwBase

@if (IsDivider)
{
    <div class="bw-dropdown-divider" role="separator"></div>
}
else
{
    <button type="button"
            class="@CombineClasses("bw-dropdown-item")"
            role="menuitem"
            @onclick="HandleClick"
            style="@Style" id="@Id" @attributes="AdditionalAttributes">
        @if (!string.IsNullOrEmpty(Icon))
        {
            <i class="@Icon bw-dropdown-icon @IconClass" aria-hidden="true"></i>
        }
        @Text
        @ChildContent
    </button>
}

@code {

    [CascadingParameter]
    public BwDropdown? Dropdown { get; set; }

    [Parameter]
    public string? Text { get; set; }

    [Parameter]
    public string? Icon { get; set; }

    [Parameter]
    public string? IconClass { get; set; }

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public bool IsDivider { get; set; }

    [Parameter]
    public EventCallback OnClick { get; set; }

    [Parameter]
    public bool CloseOnClick { get; set; } = true;

    private async Task HandleClick()
    {
        if (CloseOnClick && Dropdown != null)
        {
            Dropdown.Close();
        }

        if (OnClick.HasDelegate)
        {
            await OnClick.InvokeAsync();
        }
    }

}
