@namespace Blazwind.Components.Toolbar
@using Blazwind.Components.Shared
@inherits BwBase

@if (!string.IsNullOrEmpty(Href))
{
    <a href="@Href" class="@CombineClasses(AllClasses)" style="@Style" id="@Id" @attributes="AdditionalAttributes">
        @RenderContent
    </a>
}
else
{
    <button type="button" class="@CombineClasses(AllClasses)" style="@Style" id="@Id" @attributes="AdditionalAttributes" disabled="@Disabled" @onclick="HandleClick">
        @RenderContent
    </button>
}

@code {
    [Parameter] public string? Label { get; set; }
    [Parameter] public string? Icon { get; set; }
    [Parameter] public string? Href { get; set; }
    [Parameter] public bool Disabled { get; set; }
    [Parameter] public bool IsActive { get; set; }
    [Parameter] public EventCallback OnClick { get; set; }

    private string AllClasses => $"flex items-center gap-2.5 w-full px-2.5 py-2 rounded-md text-sm text-left transition-all duration-100 {(IsActive ? "bg-gray-100 dark:bg-white/10" : "hover:bg-gray-100 dark:hover:bg-white/10")} {(Disabled ? "opacity-40 cursor-not-allowed" : "")}";

    private RenderFragment RenderContent => __builder =>
    {
        @if (!string.IsNullOrEmpty(Icon))
        {
            <i class="@Icon text-sm text-gray-400 dark:text-gray-500 w-4"></i>
        }
        <span class="flex-1 text-gray-700 dark:text-gray-200 font-medium">@Label</span>
    };

    private async Task HandleClick()
    {
        if (!Disabled)
        {
            await OnClick.InvokeAsync();
        }
    }
}