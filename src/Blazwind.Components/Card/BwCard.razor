@namespace Blazwind.Components.Card
@using Blazwind.Components.Shared
@inherits BwBase

@{
    // Icon background class (theme-aware)
    var iconBgClass = Color switch
    {
        BwColor.Primary => "bw-card-icon-bg-primary",
        BwColor.Secondary => "bw-card-icon-bg-secondary",
        BwColor.Success => "bw-card-icon-bg-success",
        BwColor.Danger => "bw-card-icon-bg-danger",
        BwColor.Warning => "bw-card-icon-bg-warning",
        BwColor.Info => "bw-card-icon-bg-info",
        _ => "bw-card-icon-bg-primary"
    };
    
    // Icon color class (theme-aware)
    var iconColorClass = Color switch
    {
        BwColor.Primary => "bw-card-icon-primary",
        BwColor.Secondary => "bw-card-icon-secondary",
        BwColor.Success => "bw-card-icon-success",
        BwColor.Danger => "bw-card-icon-danger",
        BwColor.Warning => "bw-card-icon-warning",
        BwColor.Info => "bw-card-icon-info",
        _ => "bw-card-icon-primary"
    };
}

<div class="@CombineClasses("bw-card")" id="@Id" style="@Style" @attributes="AdditionalAttributes">
    @if (Header != null || !string.IsNullOrEmpty(Title))
    {
        <div class="bw-card-header @HeaderClass">
            @if (Header != null)
            {
                @Header
            }
            else
            {
                <div class="flex items-center gap-3">
                    @if (!string.IsNullOrEmpty(Icon))
                    {
                        <div class="bw-card-icon-wrapper @iconBgClass">
                            <i class="@Icon @iconColorClass"></i>
                        </div>
                    }
                    <div>
                        <h3 class="bw-card-title">@Title</h3>
                        @if (!string.IsNullOrEmpty(Subtitle))
                        {
                            <p class="bw-card-subtitle">@Subtitle</p>
                        }
                    </div>
                </div>
            }
        </div>
    }
    
    <div class="bw-card-body @BodyClass">
        @ChildContent
    </div>
    
    @if (Footer != null)
    {
        <div class="bw-card-footer @FooterClass">
            @Footer
        </div>
    }
</div>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public RenderFragment? Header { get; set; }
    [Parameter] public RenderFragment? Footer { get; set; }
    
    [Parameter] public string? Title { get; set; }
    [Parameter] public string? Subtitle { get; set; }
    [Parameter] public string? Icon { get; set; }
    [Parameter] public BwColor Color { get; set; } = BwColor.Primary;
    
    [Parameter] public string? HeaderClass { get; set; }
    [Parameter] public string? BodyClass { get; set; }
    [Parameter] public string? FooterClass { get; set; }
}
