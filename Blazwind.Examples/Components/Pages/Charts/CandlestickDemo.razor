@page "/charts/candlestick"
@using Blazwind.Components.Chart
@using Blazwind.Components.Card
@using Blazwind.Components.Layout
@using Blazwind.Components.Shared

<PageTitle>Candlestick - Blazwind Charts</PageTitle>

<BwColumn Spacing="BwSpacing.Lg">
    <BwHero Title="Candlestick Grafik (Mum Grafik)" 
            Description="Finansal verileri ve fiyat hareketlerini göstermek için ideal grafik tipi."
            Icon="fa-solid fa-arrows-up-down"
            Color="BwColor.Success" />

    @* Temel Candlestick *@
    <BwCard Title="Hisse Fiyat Hareketi" Subtitle="Stock price candlestick." Icon="fa-solid fa-chart-line" Color="BwColor.Primary">
        <BwChart Options="_basicCandlestick" Height="450px" />
    </BwCard>

    @* Açıklama *@
    <div class="p-4 bg-gray-50 border border-gray-200 rounded">
        <h4 class="font-semibold text-gray-800 mb-2">Candlestick Nasıl Okunur?</h4>
        <div class="grid md:grid-cols-2 gap-4 text-sm text-gray-600">
            <div>
                <p><span class="text-green-600 font-semibold">Yeşil mum:</span> Kapanış fiyatı açılış fiyatından yüksek (yükseliş)</p>
                <p><span class="text-red-600 font-semibold">Kırmızı mum:</span> Kapanış fiyatı açılış fiyatından düşük (düşüş)</p>
            </div>
            <div>
                <p><strong>Gövde:</strong> Açılış ve kapanış fiyatları arasındaki fark</p>
                <p><strong>Fitil:</strong> Günlük en yüksek ve en düşük fiyatlar</p>
            </div>
        </div>
    </div>
</BwColumn>

@code {
    private object _basicCandlestick = new
    {
        title = new { text = "Hisse Fiyat Hareketi (Örnek)", left = ChartPosition.Center },
        tooltip = new
        {
            trigger = ChartTooltipTrigger.Axis,
            axisPointer = new { type = ChartAxisPointerType.Cross }
        },
        legend = new { data = new[] { "Fiyat" }, bottom = "0" },
        xAxis = new
        {
            type = ChartAxisType.Category,
            data = GenerateDates()
        },
        yAxis = new
        {
            type = ChartAxisType.Value,
            scale = true,
            splitArea = new { show = true }
        },
        series = new[]
        {
            new
            {
                name = "Fiyat",
                type = ChartSeriesType.Candlestick,
                data = GenerateCandlestickData()
            }
        }
    };

    private static string[] GenerateDates()
    {
        return new[]
        {
            "01/01", "02/01", "03/01", "04/01", "05/01",
            "08/01", "09/01", "10/01", "11/01", "12/01",
            "15/01", "16/01", "17/01", "18/01", "19/01",
            "22/01", "23/01", "24/01", "25/01", "26/01"
        };
    }

    private static List<List<double>> GenerateCandlestickData()
    {
        // [open, close, lowest, highest]
        return new List<List<double>>
        {
            new() { 20.0, 34.0, 10.0, 38.0 },
            new() { 40.0, 35.0, 30.0, 50.0 },
            new() { 31.0, 38.0, 33.0, 44.0 },
            new() { 38.0, 15.0, 5.0, 42.0 },
            new() { 12.0, 33.0, 8.0, 38.0 },
            new() { 30.0, 40.0, 25.0, 45.0 },
            new() { 39.0, 35.0, 30.0, 44.0 },
            new() { 35.0, 45.0, 32.0, 50.0 },
            new() { 44.0, 42.0, 38.0, 48.0 },
            new() { 40.0, 52.0, 38.0, 55.0 },
            new() { 50.0, 48.0, 45.0, 55.0 },
            new() { 47.0, 55.0, 44.0, 58.0 },
            new() { 54.0, 50.0, 48.0, 57.0 },
            new() { 48.0, 58.0, 45.0, 62.0 },
            new() { 57.0, 55.0, 52.0, 60.0 },
            new() { 53.0, 60.0, 50.0, 65.0 },
            new() { 58.0, 62.0, 55.0, 68.0 },
            new() { 61.0, 58.0, 55.0, 65.0 },
            new() { 56.0, 65.0, 54.0, 70.0 },
            new() { 64.0, 60.0, 58.0, 68.0 }
        };
    }
}
