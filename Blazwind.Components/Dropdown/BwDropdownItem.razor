@namespace Blazwind.Components.Dropdown
@using Blazwind.Components.Shared
@using Blazwind.Components.Button
@inherits BwBase

@if (IsDivider)
{
    <div class="h-px margin-y-1 bg-gray-200 dark:bg-gray-700" role="separator"></div>
}
else
{
    <button type="button" 
            class="group flex w-full items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white @Class"
            role="menuitem"
            @onclick="HandleClick"
            style="@Style">
        @if (!string.IsNullOrEmpty(Icon))
        {
            <i class="@Icon mr-3 h-5 w-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-500 dark:group-hover:text-gray-300 @IconClass" aria-hidden="true"></i>
        }
        @Text
        @ChildContent
    </button>
}

@code {
    [CascadingParameter] public BwDropdown? Dropdown { get; set; }

    [Parameter] public string? Text { get; set; }
    [Parameter] public string? Icon { get; set; }
    [Parameter] public string? IconClass { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public bool IsDivider { get; set; }
    [Parameter] public EventCallback OnClick { get; set; }
    [Parameter] public bool CloseOnClick { get; set; } = true;

    private async Task HandleClick()
    {
        if (CloseOnClick && Dropdown != null)
        {
            Dropdown.Close();
        }

        if (OnClick.HasDelegate)
        {
            await OnClick.InvokeAsync();
        }
    }
}
