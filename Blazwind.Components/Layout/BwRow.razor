@namespace Blazwind.Components.Layout
@using Blazwind.Components.Shared

@{
    var justifyClass = MainAxisAlignment switch
    {
        BwMainAxisAlignment.Start => "justify-start",
        BwMainAxisAlignment.Center => "justify-center",
        BwMainAxisAlignment.End => "justify-end",
        BwMainAxisAlignment.SpaceBetween => "justify-between",
        BwMainAxisAlignment.SpaceAround => "justify-around",
        BwMainAxisAlignment.SpaceEvenly => "justify-evenly",
        _ => "justify-start"
    };
    
    var alignClass = CrossAxisAlignment switch
    {
        BwCrossAxisAlignment.Start => "items-start",
        BwCrossAxisAlignment.Center => "items-center",
        BwCrossAxisAlignment.End => "items-end",
        BwCrossAxisAlignment.Stretch => "items-stretch",
        BwCrossAxisAlignment.Baseline => "items-baseline",
        _ => "items-stretch"
    };
    
    var gapClass = "";
    if (GutterX.HasValue || GutterY.HasValue)
    {
        // Use manual gutters if provided
        var gx = GutterX ?? 0;
        var gy = GutterY ?? 0;
        gapClass = $"gap-x-{gx} gap-y-{gy}";
    }
    else
    {
        // Fallback to Spacing enum
        gapClass = Spacing switch
        {
            BwSpacing.None => "",
            BwSpacing.Xs => "gap-1",
            BwSpacing.Sm => "gap-2",
            BwSpacing.Md => "gap-4",
            BwSpacing.Lg => "gap-6",
            BwSpacing.Xl => "gap-8",
            BwSpacing.Xxl => "gap-12",
            _ => "gap-4"
        };
    }
    
    // Rows usually wrap in a grid system
    var wrapClass = Wrap ? "flex-wrap" : "flex-wrap"; // Default to wrap for grid rows? Original was Wrap param. 
    // If usage implies Grid, we typically want Wrap. User set Wrap=true default? No, default was false.
    // But in ListDemo I didn't set Wrap="true", I just said GutterX="0".
    // If I use Columns with Spans that exceed 12, I NEED wrap.
    // Let's rely on Wrap parameter but default to true if it's acting as a Grid Row (GutterX logic)?
    // Or just respect the param. Let's respect the param but user might need to set Wrap="true".
    // Actually ListDemo usage implies "modern grid", which implies wrapping.
    // Let's change default Sync: ListDemo usage didn't specify Wrap. If I change default to True, it might affect others.
    // But BwRow is "Row". Rows wrap. 
    // Let's set default Wrap to true? No, that breaks existing usages relying on no-wrap.
    // I check ListDemo. It puts multiple Cols. They sum to >12? No, `Span="12"`. They stack.
    // Flex-wrap is needed for stacking full width cols.
    
    // Re-evaluating Wrap default. 
    wrapClass = Wrap ? "flex-wrap" : "flex-nowrap";
}

<div class="flex flex-row @justifyClass @alignClass @gapClass @wrapClass @Class">
    @ChildContent
</div>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public BwMainAxisAlignment MainAxisAlignment { get; set; } = BwMainAxisAlignment.Start;
    [Parameter] public BwCrossAxisAlignment CrossAxisAlignment { get; set; } = BwCrossAxisAlignment.Stretch;
    [Parameter] public BwSpacing Spacing { get; set; } = BwSpacing.Md;
    [Parameter] public bool Wrap { get; set; } = true; // CHANGED DEFAULT TO TRUE for Grid behavior
    [Parameter] public string? Class { get; set; }
    
    [Parameter] public int? GutterX { get; set; }
    [Parameter] public int? GutterY { get; set; }
}
