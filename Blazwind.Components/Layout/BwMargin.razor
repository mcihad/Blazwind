@namespace Blazwind.Components.Layout
@using Blazwind.Components.Shared

<div class="@_classes @Class" style="@Style">
    @ChildContent
</div>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string? Class { get; set; }
    [Parameter] public string? Style { get; set; }
    [Parameter] public string TagName { get; set; } = "div";

    // EdgeInsets-like API
    [Parameter] public BwSpacing? All { get; set; }
    [Parameter] public BwSpacing? Horizontal { get; set; }
    [Parameter] public BwSpacing? Vertical { get; set; }
    [Parameter] public BwSpacing? Top { get; set; }
    [Parameter] public BwSpacing? Bottom { get; set; }
    [Parameter] public BwSpacing? Left { get; set; }
    [Parameter] public BwSpacing? Right { get; set; }

    private string _classes => BuildClasses();

    private string BuildClasses()
    {
        var classes = new List<string>();

        // 1. All (Lowest priority)
        if (All.HasValue)
        {
            classes.Add($"bw-m-{GetSize(All.Value)}");
        }

        // 2. Symmetric (Medium priority)
        if (Horizontal.HasValue)
        {
            classes.Add($"bw-mx-{GetSize(Horizontal.Value)}");
        }
        if (Vertical.HasValue)
        {
            classes.Add($"bw-my-{GetSize(Vertical.Value)}");
        }

        // 3. Specific (Highest priority)
        if (Top.HasValue)
        {
            classes.Add($"bw-mt-{GetSize(Top.Value)}");
        }
        if (Bottom.HasValue)
        {
            classes.Add($"bw-mb-{GetSize(Bottom.Value)}");
        }
        if (Left.HasValue)
        {
            classes.Add($"bw-ml-{GetSize(Left.Value)}");
        }
        if (Right.HasValue)
        {
            classes.Add($"bw-mr-{GetSize(Right.Value)}");
        }

        return string.Join(" ", classes);
    }

    private string GetSize(BwSpacing spacing) => spacing switch
    {
        BwSpacing.None => "none",
        BwSpacing.Xs => "xs",
        BwSpacing.Sm => "sm",
        BwSpacing.Md => "md",
        BwSpacing.Lg => "lg",
        BwSpacing.Xl => "xl",
        BwSpacing.Xxl => "xxl",
        _ => "md"
    };
}
